<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eggy Clicker</title>

<style>
body{margin:0;font-family:Arial;background:#fdf6f0;text-align:center}
.panel{margin:10px auto;padding:12px;border-radius:12px;width:92%;max-width:420px;box-shadow:0 0 12px rgba(0,0,0,0.15)}
button{width:100%;padding:10px;margin-top:6px;border:none;border-radius:8px;font-weight:bold}
#gameScreen{display:none}
#clickWrapper{position:relative;display:inline-block}
#clickArea{font-size:120px;cursor:pointer;animation:bounce 1.2s infinite}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.floating{position:absolute;color:orange;font-weight:bold;pointer-events:none;animation:floatUp 1s forwards}
@keyframes floatUp{0%{opacity:1}100%{opacity:0;transform:translateY(-40px)}}
.notification{position:fixed;top:-80px;left:50%;transform:translateX(-50%);background:gold;padding:10px 20px;border-radius:10px;transition:top .4s}
.locked{filter:grayscale(100%);opacity:.4}
#wardrobeBtn{background:red;color:white}
#saveBtn{background:green;color:white}
#shopPanel{background:#4da6ff;color:white}
#prestigePanel{background:orange;color:white}
</style>
</head>
<body>

<div id="homeScreen">
<h1 style="font-size:40px">ðŸ¥š EGGY CLICKER ðŸ¥š</h1>
<p>The Ultimate Idle Egg Game</p>
<input id="usernameInput" placeholder="Create Username">
<button onclick="startNewGame()">Start Game</button>
<button onclick="loadGame()">Load Save</button>
</div>

<div id="gameScreen">

<h2 id="usernameDisplay"></h2>
<h2 id="eggName"></h2>
<div id="points"></div>
<div id="cpsDisplay">CPS: 0</div>

<div id="clickWrapper">
<div id="clickArea">ðŸ¥š</div>
</div>

<div class="panel">
<button id="wardrobeBtn" onclick="toggleWardrobe()">Wardrobe</button>
</div>

<div id="wardrobePanel" class="panel" style="display:none"></div>

<div class="panel" id="shopPanel">
<h3>Shop</h3>
<button onclick="buyClick()" id="clickBtn"></button>
<button onclick="buyAuto()" id="autoBtn"></button>
<button onclick="buyCrit()" id="critBtn"></button>
</div>

<div class="panel" id="prestigePanel">
<h3>Prestige</h3>
<button onclick="prestige()" id="prestigeBtn"></button>
</div>

<div class="panel">
<button onclick="toggleMode()">Toggle Emoji / Image</button>
</div>

<div class="panel">
<button id="saveBtn" onclick="saveGame()">Save</button>
<button onclick="exportSave()">Export</button>
<button onclick="importSave()">Import</button>
<button onclick="deleteData()">Delete Data</button>
</div>

<div class="panel">
<h3>Achievements</h3>
<div id="achievements"></div>
</div>

</div>

<div id="notification" class="notification"></div>

<script>

let clickTimes=[]
let useEmoji=true

let defaultGame={
username:"",
points:0,totalClicks:0,
clickValue:1,passive:0,critChance:0,
clickCost:50,autoCost:200,critCost:300,
form:0,prestige:0,
achievements:[],
lastPlayed:Date.now()
}

let game

const baseForms=["Normal","Cool","Top Hat"]
const emojis=["ðŸ¥š","ðŸ˜ŽðŸ¥š","ðŸŽ©ðŸ¥š"]

function tierName(){
if(game.prestige==0) return ""
const tiers=["Bronze","Bronze II","Silver","Silver II","Gold","Gold II","Diamond"]
return tiers[Math.min(game.prestige-1,tiers.length-1)]+" "
}

function notify(t){
let n=document.getElementById("notification")
n.innerText=t
n.style.top="20px"
setTimeout(()=>n.style.top="-80px",2500)
}

function startNewGame(){
let name=document.getElementById("usernameInput").value.trim()
if(!name)return alert("Enter username")
game=JSON.parse(JSON.stringify(defaultGame))
game.username=name
showGame()
updateUI()
}

function showGame(){
document.getElementById("homeScreen").style.display="none"
document.getElementById("gameScreen").style.display="block"
}

function saveGame(){
game.lastPlayed=Date.now()
localStorage.setItem("eggySave",JSON.stringify(game))
notify("Saved!")
}

setInterval(()=>{if(game)saveGame()},15000)

function loadGame(){
let data=localStorage.getItem("eggySave")
if(!data)return alert("No save found")
game=JSON.parse(data)

// OFFLINE (30 min cap, 50% efficiency)
let diff=Math.floor((Date.now()-game.lastPlayed)/1000)
let offline=Math.min(diff,1800)
if(offline>0){
let earnings=offline*game.passive*0.5
game.points+=earnings
notify("Offline +"+Math.floor(earnings))
}
showGame()
updateUI()
}

function exportSave(){
if(!game)return
let code=btoa(JSON.stringify(game))
navigator.clipboard.writeText(code)
alert("Copied!")
}

function importSave(){
let code=prompt("Paste code")
if(!code)return
try{
game=JSON.parse(atob(code))
localStorage.setItem("eggySave",JSON.stringify(game))
showGame()
updateUI()
}catch{alert("Invalid")}
}

function deleteData(){
localStorage.removeItem("eggySave")
location.reload()
}

function updateUI(){
document.getElementById("usernameDisplay").innerText="Player: "+game.username
document.getElementById("points").innerText="Yolk: "+Math.floor(game.points)
document.getElementById("eggName").innerText="Egg "+tierName()+baseForms[game.form]
document.getElementById("prestigeBtn").innerText="Prestige Cost: "+(5000*(game.prestige+1))
document.getElementById("clickBtn").innerText="+1 Click ("+game.clickCost+")"
document.getElementById("autoBtn").innerText="+1 Auto ("+game.autoCost+")"
document.getElementById("critBtn").innerText="Crit ("+game.critCost+")"

let now=Date.now()
clickTimes=clickTimes.filter(t=>now-t<1000)
document.getElementById("cpsDisplay").innerText="CPS: "+clickTimes.length

renderAchievements()
}

document.getElementById("clickArea").addEventListener("click",e=>{
let gain=game.clickValue
let crit=false
if(Math.random()<game.critChance){gain*=5;crit=true}
game.points+=gain
game.totalClicks++
clickTimes.push(Date.now())

let f=document.createElement("div")
f.className="floating"
f.innerText="+"+gain
let rect=e.target.getBoundingClientRect()
f.style.left=(e.clientX-rect.left)+"px"
f.style.top=(e.clientY-rect.top)+"px"
document.getElementById("clickWrapper").appendChild(f)
setTimeout(()=>f.remove(),1000)

updateUI()
})

setInterval(()=>{if(game){game.points+=game.passive;updateUI()}},1000)

function buyClick(){if(game.points>=game.clickCost){game.points-=game.clickCost;game.clickValue++;game.clickCost*=1.5}}
function buyAuto(){if(game.points>=game.autoCost){game.points-=game.autoCost;game.passive++;game.autoCost*=1.6}}
function buyCrit(){if(game.points>=game.critCost){game.points-=game.critCost;game.critChance+=0.05;game.critCost*=1.8}}

function prestige(){
let cost=5000*(game.prestige+1)
if(game.points<cost)return
game.points=0
game.clickValue=1
game.passive=0
game.critChance=0
game.form=0
game.prestige++
notify("Prestiged!")
updateUI()
}

function toggleMode(){
useEmoji=!useEmoji
document.getElementById("clickArea").innerText=useEmoji?emojis[game.form]:"EGG"
}

function renderAchievements(){
let ach=document.getElementById("achievements")
ach.innerHTML=""
let list=[
["Click 100",game.totalClicks>=100],
["10K Yolk",game.points>=10000],
["1M Yolk",game.points>=1000000],
["Prestige 1",game.prestige>=1],
["Prestige 5",game.prestige>=5]
]
list.forEach((a,i)=>{
let div=document.createElement("div")
div.innerText=a[0]
if(!game.achievements.includes(i)&&a[1]){
game.achievements.push(i)
notify("Achievement: "+a[0])
}
if(!game.achievements.includes(i))div.className="locked"
ach.appendChild(div)
})
}

</script>
</body>
</html>