<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eggy Clicker</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#fdf6f0;
  text-align:center;
}
.panel{
  margin:10px auto;
  padding:12px;
  border-radius:12px;
  width:95%;
  max-width:500px;
  box-shadow:0 0 10px rgba(0,0,0,0.15);
}
button{
  width:100%;
  padding:10px;
  margin-top:6px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
button:active{transform:scale(.98);}
#wardrobeBtn{background:red;color:white;}
#saveBtn{background:green;color:white;}
#topBar button{background:#333;color:white;}
#clickArea{
  font-size:110px;
  cursor:pointer;
  user-select:none;
}
.floating{
  position:absolute;
  pointer-events:none;
  font-weight:bold;
  color:orange;
  animation:floatUp 1s forwards;
}
@keyframes floatUp{
  0%{opacity:1;}
  100%{opacity:0;transform:translateY(-40px);}
}
.notification{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  background:gold;
  padding:10px 20px;
  border-radius:10px;
  opacity:0;
  transition:.3s;
  z-index:1000;
}
.locked{
  opacity:.4;
  pointer-events:none;
}
</style>
</head>
<body>

<div id="homeScreen">
<h1>ðŸ¥š Eggy Clicker ðŸ¥š</h1>
<input id="usernameInput" placeholder="Enter Username">
<button onclick="startGame()">Start Game</button>
<button onclick="loadGame()">Load Save</button>
</div>

<div id="gameScreen" style="display:none;">

<div id="topBar" class="panel">
<button onclick="toggleEmoji()">Toggle Emoji</button>
<button onclick="goToEvent()">Event</button>
</div>

<h2 id="playerName"></h2>
<h3 id="rankDisplay"></h3>
<h3 id="pointsDisplay"></h3>
<h3 id="cpsDisplay"></h3>

<div id="clickWrapper" style="position:relative;display:inline-block;">
<div id="clickArea">ðŸ¥š</div>
</div>

<div class="panel">
<button id="wardrobeBtn" onclick="toggleWardrobe()">Wardrobe</button>
<div id="wardrobePanel" style="display:none;"></div>
</div>

<div class="panel">
<h3>Shop</h3>
<button onclick="buyClick()" id="clickUpgrade"></button>
<button onclick="buyAuto()" id="autoUpgrade"></button>
<button onclick="buyCrit()" id="critUpgrade"></button>
<button onclick="buyBackground()">Change Background (100)</button>
</div>

<div class="panel">
<h3>Prestige</h3>
<button onclick="prestige()" id="prestigeBtn"></button>
</div>

<div class="panel">
<h3>Achievements</h3>
<div id="achievementsList"></div>
</div>

<div class="panel">
<button id="saveBtn" onclick="manualSave()">Save</button>
<button onclick="exportSave()">Export</button>
<button onclick="importSave()">Import</button>
<button onclick="deleteData()">Delete</button>
</div>

</div>

<div id="notification" class="notification"></div>

<script>

/* =========================
   CORE DATA
========================= */

let game = null;
let clickTimes = [];
let useEmoji = true;
let critStreak = 0;
let maxCritStreak = 0;

const forms = ["Normal","Cool","Top Hat","Crown"];
const emojis = ["ðŸ¥š","ðŸ˜ŽðŸ¥š","ðŸŽ©ðŸ¥š","ðŸ‘‘ðŸ¥š"];

const defaultData = {
  username:"",
  points:0,
  totalClicks:0,
  clickValue:1,
  passive:0,
  critChance:0,
  clickCost:50,
  autoCost:200,
  critCost:300,
  prestige:0,
  form:0,
  ownedSkins:["0-0"],
  achievements:[],
  lastPlayed:Date.now(),
  background:"#fdf6f0"
};

/* =========================
   PRESTIGE SYSTEM
========================= */

function getRank(level){
  const tiers=["Bronze","Silver","Gold","Diamond"];
  if(level < 8){
    let tier=Math.floor(level/2);
    let stage=(level%2===0)?" I":" II";
    return tiers[tier]+stage;
  }
  if(level < 18){
    return "Master "+(level-7);
  }
  if(level===18) return "Ultimate Master";
  return "Ultimate Master +"+(level-18);
}

/* =========================
   START / LOAD
========================= */

function startGame(){
  const name = usernameInput.value.trim();
  if(!name)return alert("Enter username");
  game = JSON.parse(JSON.stringify(defaultData));
  game.username = name;
  homeScreen.style.display="none";
  gameScreen.style.display="block";
  updateUI();
}

function loadGame(){
  const save = localStorage.getItem("eggySave");
  if(!save)return alert("No save");
  game = JSON.parse(save);

  let offlineSeconds = Math.min(1800, Math.floor((Date.now()-game.lastPlayed)/1000));
  game.points += offlineSeconds * game.passive;

  homeScreen.style.display="none";
  gameScreen.style.display="block";
  updateUI();
}

/* =========================
   SAVE SYSTEM
========================= */

function manualSave(){
  game.lastPlayed = Date.now();
  localStorage.setItem("eggySave",JSON.stringify(game));
  notify("Saved!");
}

function exportSave(){
  navigator.clipboard.writeText(btoa(JSON.stringify(game)));
  notify("Copied!");
}

function importSave(){
  const code = prompt("Paste code");
  if(!code)return;
  game = JSON.parse(atob(code));
  updateUI();
}

function deleteData(){
  if(prompt("Type DELETE to confirm")==="DELETE"){
    localStorage.removeItem("eggySave");
    location.reload();
  }
}

/* =========================
   CLICK SYSTEM
========================= */

clickArea.addEventListener("pointerdown", function(e){

  let gain = game.clickValue;
  let isCrit=false;

  if(Math.random()<game.critChance){
    gain*=5;
    isCrit=true;
    critStreak++;
  }else{
    critStreak=0;
  }

  maxCritStreak=Math.max(maxCritStreak,critStreak);

  game.points+=gain;
  game.totalClicks++;
  clickTimes.push(Date.now());

  spawnFloat(e,gain,isCrit);
  checkAchievements();
  updateUI();
});

function spawnFloat(e,gain,isCrit){
  const div=document.createElement("div");
  div.className="floating";
  div.innerText=(isCrit?"CRIT! +":"+")+gain;
  const rect=clickWrapper.getBoundingClientRect();
  div.style.left=(e.clientX-rect.left)+"px";
  div.style.top=(e.clientY-rect.top)+"px";
  clickWrapper.appendChild(div);
  setTimeout(()=>div.remove(),1000);
}

/* =========================
   SHOP
========================= */

function buyClick(){
  if(game.points<game.clickCost)return;
  game.points-=game.clickCost;
  game.clickValue++;
  game.clickCost=Math.floor(game.clickCost*1.4);
}

function buyAuto(){
  if(game.points<game.autoCost)return;
  game.points-=game.autoCost;
  game.passive++;
  game.autoCost=Math.floor(game.autoCost*1.6);
}

function buyCrit(){
  if(game.points<game.critCost)return;
  game.points-=game.critCost;
  game.critChance+=.05;
  game.critCost=Math.floor(game.critCost*1.8);
}

function buyBackground(){
  if(game.points<100)return;
  game.points-=100;
  game.background = (game.background==="#fdf6f0")?"#e0f7ff":"#fdf6f0";
  document.body.style.background=game.background;
}

/* =========================
   PRESTIGE
========================= */

function prestige(){
  const cost = 5000*(game.prestige+1);
  if(game.points<cost)return;

  game.points=0;
  game.clickValue=1;
  game.passive=0;
  game.critChance=0;
  game.clickCost=50;
  game.autoCost=200;
  game.critCost=300;
  game.prestige++;

  notify("Now "+getRank(game.prestige));
}

/* =========================
   WARDROBE
========================= */

function toggleWardrobe(){
  wardrobePanel.style.display=
    wardrobePanel.style.display==="none"?"block":"none";
  renderWardrobe();
}

function renderWardrobe(){
  wardrobePanel.innerHTML="";
  forms.forEach((form,i)=>{
    const key=game.prestige+"-"+i;
    const cost=(game.prestige+1)*(i+1)*400;

    const btn=document.createElement("button");
    btn.innerText=form+" ("+cost+")";

    if(!game.ownedSkins.includes(key)){
      btn.onclick=()=>{
        if(game.points<cost)return;
        game.points-=cost;
        game.ownedSkins.push(key);
        game.form=i;
        updateUI();
      };
    }else{
      btn.onclick=()=>{
        game.form=i;
        updateUI();
      };
    }

    wardrobePanel.appendChild(btn);
  });
}

/* =========================
   ACHIEVEMENTS
========================= */

const achievementsData=[
"100 Clicks","1k Clicks","10k Clicks",
"Crit 5 Streak","Crit 10 Streak",
"First Prestige","Silver Rank","Gold Rank",
"Diamond Rank","Master Rank","Ultimate Master",
"1M Yolk","10M Yolk","100M Yolk"
];

function unlockAchievement(i){
  if(!game.achievements.includes(i)){
    game.achievements.push(i);
    notify("Achievement: "+achievementsData[i]);
  }
}

function checkAchievements(){
  if(game.totalClicks>=100)unlockAchievement(0);
  if(game.totalClicks>=1000)unlockAchievement(1);
  if(game.totalClicks>=10000)unlockAchievement(2);
  if(maxCritStreak>=5)unlockAchievement(3);
  if(maxCritStreak>=10)unlockAchievement(4);
  if(game.prestige>=1)unlockAchievement(5);
  if(game.prestige>=2)unlockAchievement(6);
  if(game.prestige>=4)unlockAchievement(7);
  if(game.prestige>=6)unlockAchievement(8);
  if(game.prestige>=8)unlockAchievement(9);
  if(game.prestige>=18)unlockAchievement(10);
  if(game.points>=1e6)unlockAchievement(11);
  if(game.points>=1e7)unlockAchievement(12);
  if(game.points>=1e8)unlockAchievement(13);
}

function renderAchievements(){
  achievementsList.innerHTML="";
  achievementsData.forEach((a,i)=>{
    const div=document.createElement("div");
    div.innerText=a;
    if(!game.achievements.includes(i))div.className="locked";
    achievementsList.appendChild(div);
  });
}

/* =========================
   UI UPDATE
========================= */

function updateUI(){
  playerName.innerText="Player: "+game.username;
  rankDisplay.innerText="Rank: "+getRank(game.prestige);
  pointsDisplay.innerText="Yolk: "+Math.floor(game.points);
  cpsDisplay.innerText="CPS: "+clickTimes.filter(t=>Date.now()-t<1000).length;
  clickUpgrade.innerText="+Click ("+game.clickCost+")";
  autoUpgrade.innerText="+Auto ("+game.autoCost+")";
  critUpgrade.innerText="Crit ("+game.critCost+")";
  prestigeBtn.innerText="Prestige Cost: "+(5000*(game.prestige+1));
  clickArea.innerText=useEmoji?emojis[game.form]:"EGG";
  document.body.style.background=game.background;
  renderAchievements();
}

/* =========================
   EVENT
========================= */

function goToEvent(){
  window.location.href="event.html";
}

/* =========================
   HIDDEN GOD MODE
========================= */

function activateGodMode(code){
  if(code!=="EGGY-DEV-999")return alert("Invalid");
  game.points=1e9;
  game.clickValue=1000;
  game.passive=100;
  game.critChance=1;
  game.prestige=18;
  updateUI();
  notify("DEV MODE");
}

/* =========================
   MISC
========================= */

function notify(text){
  notification.innerText=text;
  notification.style.opacity=1;
  setTimeout(()=>notification.style.opacity=0,2000);
}

function toggleEmoji(){
  useEmoji=!useEmoji;
  updateUI();
}

setInterval(()=>{
  if(game){
    game.points+=game.passive;
    updateUI();
  }
},1000);

setInterval(()=>{
  if(game)manualSave();
},30000);

</script>
</body>
</html>