<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eggy Clicker</title>

<style>
body{margin:0;font-family:Arial;background:#fdf6f0;text-align:center;transition:.3s}
h1,h2,h3{margin:8px}
.panel{margin:10px auto;padding:12px;border-radius:12px;width:95%;max-width:460px;box-shadow:0 0 15px rgba(0,0,0,.15)}
button{width:100%;padding:10px;margin-top:6px;border:none;border-radius:8px;font-weight:bold;cursor:pointer}
#gameScreen{display:none}
#clickWrapper{position:relative;display:inline-block;z-index:5}
#clickArea{font-size:120px;cursor:pointer;animation:bounce 1.2s infinite ease-in-out;user-select:none;position:relative;z-index:10}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.floating{position:absolute;color:orange;font-weight:bold;pointer-events:none;animation:floatUp 1s forwards;z-index:20}
@keyframes floatUp{0%{opacity:1}100%{opacity:0;transform:translateY(-40px)}}
.notification{position:fixed;top:-100px;left:50%;transform:translateX(-50%);background:gold;padding:12px 25px;border-radius:12px;font-weight:bold;transition:.4s;z-index:999}
.locked{opacity:.35;filter:grayscale(100%)}
#wardrobeBtn{background:red;color:white}
#saveBtn{background:green;color:white}
#shopPanel{background:#4da6ff;color:white}
#prestigePanel{background:orange;color:white}
#wardrobePanel{background:#ff4d4d;color:white;display:none}
</style>
</head>
<body>

<div id="homeScreen">
<h1>ðŸ¥š EGGY CLICKER ðŸ¥š</h1>
<input id="usernameInput" placeholder="Enter Username">
<button onclick="startNewGame()">Start Game</button>
<button onclick="loadGame()">Load Save</button>
</div>

<div id="gameScreen">

<h2 id="usernameDisplay"></h2>
<h2 id="eggDisplay"></h2>
<div id="pointsDisplay"></div>
<div id="cpsDisplay">CPS: 0</div>

<div id="clickWrapper">
<div id="clickArea">ðŸ¥š</div>
</div>

<div class="panel">
<button id="wardrobeBtn" onclick="toggleWardrobe()">Wardrobe</button>
</div>

<div id="wardrobePanel" class="panel">
<h3>Wardrobe</h3>
<div id="wardrobeList"></div>
</div>

<div class="panel" id="shopPanel">
<h3>Shop</h3>
<button onclick="buyClick()" id="clickBtn"></button>
<button onclick="buyAuto()" id="autoBtn"></button>
<button onclick="buyCrit()" id="critBtn"></button>
<button onclick="changeBackground()">Change Background (100)</button>
</div>

<div class="panel" id="prestigePanel">
<h3>Prestige</h3>
<button onclick="prestige()" id="prestigeBtn"></button>
</div>

<div class="panel">
<h3>Achievements</h3>
<div id="achievementsList"></div>
</div>

<div class="panel">
<button onclick="toggleMode()">Toggle Emoji / Image</button>
<button onclick="goToEvent()">Event</button>
<button id="saveBtn" onclick="manualSave()">Save</button>
<button onclick="exportSave()">Export</button>
<button onclick="importSave()">Import</button>
<button onclick="deleteData()">Delete Data</button>
</div>

</div>

<div id="notification" class="notification"></div>

<audio id="music" loop src="https://cdn.pixabay.com/audio/2022/03/15/audio_c8e59a0d0c.mp3"></audio>
<audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_9b0d68f6d4.mp3"></audio>
<audio id="critSound" src="https://cdn.pixabay.com/audio/2022/03/10/audio_8e72d0f5b3.mp3"></audio>

<script>

// ================= SAFE INIT =================

let game = null;
let useEmoji = true;
let clickTimes = [];
let critStreak = 0;
let maxCritStreak = 0;
let startedMusic = false;

const tiers=["None","Bronze","Silver","Gold","Diamond"];
const forms=["Normal","Cool","Top Hat","Crown"];
const emojis=["ðŸ¥š","ðŸ˜ŽðŸ¥š","ðŸŽ©ðŸ¥š","ðŸ‘‘ðŸ¥š"];

const defaultGame={
username:"",
points:0,
totalClicks:0,
clickValue:1,
passive:0,
critChance:0,
clickCost:50,
autoCost:200,
critCost:300,
form:0,
prestigeLevel:0,
ownedSkins:["0-0"],
achievements:[],
background:"#fdf6f0",
lastPlayed:Date.now()
};

// ================= NOTIFICATIONS =================

function notify(text){
const n=document.getElementById("notification");
n.innerText=text;
n.style.top="20px";
setTimeout(()=>n.style.top="-100px",2500);
}

// ================= START =================

function startNewGame(){
let name=document.getElementById("usernameInput").value.trim();
if(!name){ alert("Enter Username"); return; }

game=JSON.parse(JSON.stringify(defaultGame));
game.username=name;

document.getElementById("homeScreen").style.display="none";
document.getElementById("gameScreen").style.display="block";

unlockAchievement(0);
updateUI();
}

// ================= SAVE =================

function manualSave(){
if(!game) return;
game.lastPlayed=Date.now();
localStorage.setItem("eggySave",JSON.stringify(game));
notify("Game Saved!");
}

function loadGame(){
let data=localStorage.getItem("eggySave");
if(!data){ alert("No save found"); return; }

game=JSON.parse(data);

let diff=Math.floor((Date.now()-game.lastPlayed)/1000);
let offline=Math.min(diff,1800);
let earnings=offline*game.passive*0.25;
game.points+=earnings;

document.getElementById("homeScreen").style.display="none";
document.getElementById("gameScreen").style.display="block";

notify("Offline +" + Math.floor(earnings));
updateUI();
}

function exportSave(){
if(!game) return;
navigator.clipboard.writeText(btoa(JSON.stringify(game)));
notify("Save Code Copied!");
}

function importSave(){
let code=prompt("Paste Save Code");
if(!code) return;

try{
game=JSON.parse(atob(code));
localStorage.setItem("eggySave",JSON.stringify(game));
updateUI();
notify("Save Imported!");
}catch{
alert("Invalid Code");
}
}

function deleteData(){
let confirmText=prompt("Type DELETE to erase your save");
if(confirmText==="DELETE"){
localStorage.removeItem("eggySave");
location.reload();
}
}

// Autosave SAFE
setInterval(()=>{
if(game){
game.lastPlayed=Date.now();
localStorage.setItem("eggySave",JSON.stringify(game));
}
},15000);

// ================= CLICK =================

document.getElementById("clickArea").addEventListener("pointerdown",function(e){

if(!game) return;

if(!startedMusic){
document.getElementById("music").play();
startedMusic=true;
}

document.getElementById("clickSound").play();

let gain=game.clickValue;

if(Math.random()<game.critChance){
gain*=5;
document.getElementById("critSound").play();
critStreak++;
}else{
critStreak=0;
}

maxCritStreak=Math.max(maxCritStreak,critStreak);

game.points+=gain;
game.totalClicks++;
clickTimes.push(Date.now());

let float=document.createElement("div");
float.className="floating";
float.innerText="+"+gain;

let rect=document.getElementById("clickWrapper").getBoundingClientRect();
float.style.left=(e.clientX-rect.left)+"px";
float.style.top=(e.clientY-rect.top)+"px";

document.getElementById("clickWrapper").appendChild(float);
setTimeout(()=>float.remove(),1000);

checkAchievements();
updateUI();
});

// Passive income SAFE
setInterval(()=>{
if(game){
game.points+=game.passive;
updateUI();
}
},1000);

// ================= SHOP =================

function buyClick(){
if(!game) return;
if(game.points>=game.clickCost){
game.points-=game.clickCost;
game.clickValue++;
game.clickCost=Math.floor(game.clickCost*1.5);
updateUI();
}
}

function buyAuto(){
if(!game) return;
if(game.points>=game.autoCost){
game.points-=game.autoCost;
game.passive++;
game.autoCost=Math.floor(game.autoCost*1.6);
updateUI();
}
}

function buyCrit(){
if(!game) return;
if(game.points>=game.critCost){
game.points-=game.critCost;
game.critChance+=0.05;
game.critCost=Math.floor(game.critCost*1.8);
updateUI();
}
}

// ================= PRESTIGE =================

function prestige(){
if(!game) return;
let cost=5000*(game.prestigeLevel+1);
if(game.points<cost) return;

game.points=0;
game.clickValue=1;
game.passive=0;
game.critChance=0;
game.clickCost=50;
game.autoCost=200;
game.critCost=300;
game.form=0;
game.prestigeLevel++;

notify("Prestiged to "+tiers[game.prestigeLevel]);
updateUI();
}

// ================= ACHIEVEMENTS =================

const achievementData=[
"Welcome to the Game",
"100 Clicks","1,000 Clicks","10,000 Clicks","100,000 Clicks",
"First Prestige","5 Prestiges","10 Prestiges",
"Reach 10k Yolk","Reach 1M Yolk",
"Crit Streak 5","Crit Streak 10",
"CPS 5","CPS 10"
];

function unlockAchievement(id){
if(!game.achievements.includes(id)){
game.achievements.push(id);
notify("Achievement Unlocked: "+achievementData[id]);
}
}

function checkAchievements(){
if(game.totalClicks>=100)unlockAchievement(1);
if(game.totalClicks>=1000)unlockAchievement(2);
if(game.totalClicks>=10000)unlockAchievement(3);
if(game.totalClicks>=100000)unlockAchievement(4);
if(game.prestigeLevel>=1)unlockAchievement(5);
if(game.prestigeLevel>=5)unlockAchievement(6);
if(game.prestigeLevel>=10)unlockAchievement(7);
if(game.points>=10000)unlockAchievement(8);
if(game.points>=1000000)unlockAchievement(9);
if(maxCritStreak>=5)unlockAchievement(10);
if(maxCritStreak>=10)unlockAchievement(11);

let now=Date.now();
clickTimes=clickTimes.filter(t=>now-t<1000);
if(clickTimes.length>=5)unlockAchievement(12);
if(clickTimes.length>=10)unlockAchievement(13);
}

// ================= UI =================

function updateUI(){
if(!game) return;

document.body.style.background=game.background;
document.getElementById("usernameDisplay").innerText="Player: "+game.username;
document.getElementById("eggDisplay").innerText="Egg "+tiers[game.prestigeLevel]+" "+forms[game.form];
document.getElementById("pointsDisplay").innerText="Yolk: "+Math.floor(game.points);

let now=Date.now();
clickTimes=clickTimes.filter(t=>now-t<1000);
document.getElementById("cpsDisplay").innerText="CPS: "+clickTimes.length;

document.getElementById("clickBtn").innerText="+1 Click ("+game.clickCost+")";
document.getElementById("autoBtn").innerText="+1 Auto ("+game.autoCost+")";
document.getElementById("critBtn").innerText="Crit ("+game.critCost+")";
document.getElementById("prestigeBtn").innerText="Prestige Cost: "+(5000*(game.prestigeLevel+1));
}

</script>
</body>
</html>