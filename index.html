<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eggy Clicker</title>

<style>
body{margin:0;font-family:Arial;background:#fdf6f0;text-align:center;transition:.3s}
.panel{margin:10px auto;padding:12px;border-radius:12px;width:92%;max-width:420px;box-shadow:0 0 12px rgba(0,0,0,0.15)}
button{width:100%;padding:10px;margin-top:6px;border:none;border-radius:8px;font-weight:bold}
#gameScreen{display:none}
#clickWrapper{position:relative;display:inline-block}
#clickArea{font-size:120px;cursor:pointer;animation:bounce 1.2s infinite ease-in-out}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.floating{position:absolute;color:orange;font-weight:bold;pointer-events:none;animation:floatUp 1s forwards}
@keyframes floatUp{0%{opacity:1}100%{opacity:0;transform:translateY(-40px)}}
.notification{position:fixed;top:-80px;left:50%;transform:translateX(-50%);background:gold;padding:10px 20px;border-radius:10px;transition:.4s}
.locked{filter:grayscale(100%);opacity:.4}
#wardrobePanel{background:#ff4d4d;color:white;display:none}
#shopPanel{background:#4da6ff;color:white}
#prestigePanel{background:orange;color:white}
#wardrobeBtn{background:red;color:white}
#saveBtn{background:green;color:white}
</style>
</head>
<body>

<div id="homeScreen">
<h1 style="margin-top:80px;">ðŸ¥š EGGY CLICKER ðŸ¥š</h1>
<input id="usernameInput" placeholder="Enter Username">
<button onclick="startNewGame()">Start Game</button>
<button onclick="loadGame()">Load Save</button>
</div>

<div id="gameScreen">

<h2 id="usernameDisplay"></h2>
<h2 id="eggName"></h2>
<div id="points"></div>
<div id="cpsDisplay">CPS: 0</div>

<div id="clickWrapper">
<div id="clickArea">ðŸ¥š</div>
</div>

<div class="panel">
<button id="wardrobeBtn" onclick="toggleWardrobe()">Wardrobe</button>
</div>

<div id="wardrobePanel" class="panel">
<h3>Wardrobe</h3>
<div id="wardrobeList"></div>
</div>

<div class="panel" id="shopPanel">
<h3>Shop</h3>
<button onclick="buyClick()" id="clickBtn"></button>
<button onclick="buyAuto()" id="autoBtn"></button>
<button onclick="buyCrit()" id="critBtn"></button>
<button onclick="changeBackground()">Change Background (100)</button>
</div>

<div class="panel" id="prestigePanel">
<h3>Prestige</h3>
<button onclick="prestige()" id="prestigeBtn"></button>
</div>

<div class="panel">
<h3>Achievements</h3>
<div id="achievements"></div>
</div>

<div class="panel">
<button onclick="toggleMode()">Toggle Emoji / Image</button>
<button onclick="goToEvent()">Event</button>
</div>

<div class="panel">
<button id="saveBtn" onclick="saveGame()">Save</button>
<button onclick="exportSave()">Export</button>
<button onclick="importSave()">Import</button>
<button onclick="deleteData()">Delete Data</button>
</div>

</div>

<div id="notification" class="notification"></div>

<audio id="music" loop src="https://cdn.pixabay.com/audio/2022/03/15/audio_c8e59a0d0c.mp3"></audio>
<audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_9b0d68f6d4.mp3"></audio>
<audio id="critSound" src="https://cdn.pixabay.com/audio/2022/03/10/audio_8e72d0f5b3.mp3"></audio>

<script>

let startedMusic=false
let clickTimes=[]
let critStreak=0
let maxCritStreak=0
let useEmoji=true

const tiers=["None","Bronze","Silver","Gold","Diamond"]
const forms=["Normal","Cool","Top Hat","Crown"]
const emojis=["ðŸ¥š","ðŸ˜ŽðŸ¥š","ðŸŽ©ðŸ¥š","ðŸ‘‘ðŸ¥š"]

let defaultGame={
username:"",
points:0,totalClicks:0,
clickValue:1,passive:0,critChance:0,
clickCost:50,autoCost:200,critCost:300,
form:0,ownedSkins:["0-0"],
prestigeLevel:0,
achievements:[],
background:"#fdf6f0",
lastPlayed:Date.now()
}

let game

function notify(t){
notification.innerText=t
notification.style.top="20px"
setTimeout(()=>notification.style.top="-80px",2500)
}

function startNewGame(){
let name=usernameInput.value.trim()
if(!name)return alert("Enter username")
game=JSON.parse(JSON.stringify(defaultGame))
game.username=name
showGame()
updateUI()
}

function showGame(){
homeScreen.style.display="none"
gameScreen.style.display="block"
}

function saveGame(){
game.lastPlayed=Date.now()
localStorage.setItem("eggySave",JSON.stringify(game))
notify("Saved!")
}

setInterval(()=>{if(game)saveGame()},15000)

function loadGame(){
let data=localStorage.getItem("eggySave")
if(!data)return alert("No save found")
game=JSON.parse(data)

let diff=Math.floor((Date.now()-game.lastPlayed)/1000)
let offline=Math.min(diff,1800)
if(offline>0){
let earnings=offline*game.passive*0.5
game.points+=earnings
notify("Offline +"+Math.floor(earnings))
}

showGame()
updateUI()
}

function exportSave(){
navigator.clipboard.writeText(btoa(JSON.stringify(game)))
alert("Copied!")
}

function importSave(){
let code=prompt("Paste Code")
if(!code)return
game=JSON.parse(atob(code))
localStorage.setItem("eggySave",JSON.stringify(game))
updateUI()
}

function deleteData(){
localStorage.removeItem("eggySave")
location.reload()
}

function goToEvent(){
window.location.href="event.html"
}

function updateUI(){
document.body.style.background=game.background
usernameDisplay.innerText="Player: "+game.username
points.innerText="Yolk: "+Math.floor(game.points)
eggName.innerText="Egg "+tiers[game.prestigeLevel]+" "+forms[game.form]

prestigeBtn.innerText="Prestige Cost: "+(5000*(game.prestigeLevel+1))
clickBtn.innerText="+1 Click ("+game.clickCost+")"
autoBtn.innerText="+1 Auto/sec ("+game.autoCost+")"
critBtn.innerText="Crit Chance ("+game.critCost+")"

let now=Date.now()
clickTimes=clickTimes.filter(t=>now-t<1000)
cpsDisplay.innerText="CPS: "+clickTimes.length

renderWardrobe()
renderAchievements()
}

clickArea.addEventListener("click",e=>{
if(!startedMusic){music.play();startedMusic=true}
clickSound.play()

let gain=game.clickValue
if(Math.random()<game.critChance){
gain*=5
critSound.play()
critStreak++
}else critStreak=0

maxCritStreak=Math.max(maxCritStreak,critStreak)

game.points+=gain
game.totalClicks++
clickTimes.push(Date.now())

let float=document.createElement("div")
float.className="floating"
float.innerText="+"+gain
let rect=clickWrapper.getBoundingClientRect()
float.style.left=(e.clientX-rect.left)+"px"
float.style.top=(e.clientY-rect.top)+"px"
clickWrapper.appendChild(float)
setTimeout(()=>float.remove(),1000)

updateUI()
})

setInterval(()=>{if(game){game.points+=game.passive;updateUI()}},1000)

function buyClick(){if(game.points>=game.clickCost){game.points-=game.clickCost;game.clickValue++;game.clickCost=Math.floor(game.clickCost*1.5)}}
function buyAuto(){if(game.points>=game.autoCost){game.points-=game.autoCost;game.passive++;game.autoCost=Math.floor(game.autoCost*1.6)}}
function buyCrit(){if(game.points>=game.critCost){game.points-=game.critCost;game.critChance+=0.05;game.critCost=Math.floor(game.critCost*1.8)}}

function changeBackground(){
if(game.points>=100){
game.points-=100
let colors=["#fdf6f0","#d0f0ff","#ffe0f0","#e0ffd8","#fff0c2"]
game.background=colors[Math.floor(Math.random()*colors.length)]
}
}

function prestige(){
let cost=5000*(game.prestigeLevel+1)
if(game.points<cost)return
game.points=0
game.clickValue=1
game.passive=0
game.critChance=0
game.clickCost=50
game.autoCost=200
game.critCost=300
game.form=0
game.prestigeLevel++
notify("Prestiged!")
}

function toggleWardrobe(){
wardrobePanel.style.display=
wardrobePanel.style.display==="none"?"block":"none"
}

function toggleMode(){
useEmoji=!useEmoji
clickArea.innerText=useEmoji?emojis[game.form]:"EGG"
}

function renderWardrobe(){
wardrobeList.innerHTML=""
for(let t=0;t<tiers.length;t++){
for(let f=0;f<forms.length;f++){
let key=t+"-"+f
let div=document.createElement("div")
div.innerText=tiers[t]+" "+forms[f]

if(!game.ownedSkins.includes(key)) div.className="locked"

div.onclick=function(){
if(t<=game.prestigeLevel){
game.form=f
game.ownedSkins.push(key)
updateUI()
}
}
wardrobeList.appendChild(div)
}
}
clickArea.innerText=useEmoji?emojis[game.form]:"EGG"
}

function renderAchievements(){
let achList=[
["Click 100",game.totalClicks>=100],
["Click 1000",game.totalClicks>=1000],
["Reach 10k",game.points>=10000],
["Reach 1M",game.points>=1000000],
["First Prestige",game.prestigeLevel>=1],
["5 Crits In Row",maxCritStreak>=5],
["CPS 10+",clickTimes.length>=10],
["10 Prestiges",game.prestigeLevel>=10]
]

achievements.innerHTML=""
achList.forEach((a,i)=>{
let div=document.createElement("div")
div.innerText=a[0]
if(!game.achievements.includes(i)&&a[1]){
game.achievements.push(i)
notify("Achievement: "+a[0])
}
if(!game.achievements.includes(i))div.className="locked"
achievements.appendChild(div)
})
}

</script>
</body>
</html>