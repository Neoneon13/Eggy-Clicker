<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eggy Clicker Ultimate</title>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>

<style>
body{margin:0;font-family:Arial;background:#fdf6f0;text-align:center;}
.panel{margin:10px auto;padding:12px;border-radius:12px;width:92%;max-width:420px;box-shadow:0 0 12px rgba(0,0,0,0.15);}
button{width:100%;padding:10px;margin-top:6px;border:none;border-radius:8px;font-weight:bold;}
#gameScreen{display:none;}
#clickWrapper{position:relative;display:inline-block;}
#clickArea{font-size:120px;cursor:pointer;animation:bounce 1.2s infinite ease-in-out;}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.floating{position:absolute;color:orange;font-weight:bold;animation:floatUp 1s forwards;pointer-events:none;}
@keyframes floatUp{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-40px)}}
.notification{position:fixed;top:-80px;left:50%;transform:translateX(-50%);background:gold;padding:10px 20px;border-radius:10px;transition:top 0.4s ease;z-index:999;}
.locked{filter:grayscale(100%);opacity:0.5;}
#wardrobePanel{background:#ff4d4d;color:white;display:none;}
#shopPanel{background:#4da6ff;color:white;}
#prestigePanel{background:orange;color:white;}
#achievementsPanel{background:white;color:black;}
#wardrobeBtn{background:red;color:white;}
#leaderboardPanel{background:#222;color:white;}
</style>
</head>
<body>

<div id="homeScreen">
<h1>ðŸ¥š Eggy Clicker</h1>
<input id="usernameInput" placeholder="Enter Username">
<button onclick="startNewGame()">Start New Game</button>
<button onclick="loadGameFromStorage()">Load Previous Save</button>
</div>

<div id="gameScreen">

<h2 id="usernameDisplay"></h2>
<h2 id="eggName"></h2>
<div id="points"></div>
<div id="cpsDisplay">CPS: 0</div>

<div id="clickWrapper">
<div id="clickArea">ðŸ¥š</div>
</div>

<div class="panel">
<button id="wardrobeBtn" onclick="toggleWardrobe()">ðŸ‘• Wardrobe</button>
</div>

<div id="wardrobePanel" class="panel">
<h3>Wardrobe</h3>
<div id="wardrobeList"></div>
</div>

<div class="panel" id="shopPanel">
<h3>Shop</h3>
<button onclick="buyClick()" id="clickBtn"></button>
<button onclick="buyAuto()" id="autoBtn"></button>
<button onclick="buyCrit()" id="critBtn"></button>
<button onclick="changeBackground()">Change Background (100)</button>
</div>

<div class="panel" id="prestigePanel">
<h3>Prestige</h3>
<button onclick="prestige()" id="prestigeBtn"></button>
</div>

<div class="panel" id="achievementsPanel">
<h3>Achievements</h3>
<div id="achievements"></div>
</div>

<div class="panel" id="leaderboardPanel">
<h3>Online Leaderboard</h3>
<div id="leaderboard"></div>
<button onclick="submitScore()">Submit Score</button>
</div>

<div class="panel">
<button onclick="manualSave()">Save Game</button>
<button onclick="manualLoad()">Load Game</button>
<button onclick="exportSave()">Export Save Code</button>
<button onclick="importSave()">Import Save Code</button>
<button onclick="deleteData()">Delete Data</button>
</div>

</div>

<div id="notification" class="notification"></div>

<script>

// ðŸ”¥ REPLACE THIS WITH YOUR FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB_URL",
  projectId: "YOUR_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_MSG_ID",
  appId: "YOUR_APP_ID"
};

firebase.initializeApp(firebaseConfig);
const database = firebase.database();

let clickTimes=[];
let game;

let defaultGame={
username:"",
points:0,totalClicks:0,clickValue:1,passive:0,critChance:0,
clickCost:50,autoCost:200,critCost:300,
form:0,ownedForms:[0],prestigeLevel:0,
lastPlayed:Date.now(),achievements:[],
background:"#fdf6f0"
};

const forms=["Normal","Cool","Top Hat","Crown"];
const emojis=["ðŸ¥š","ðŸ˜ŽðŸ¥š","ðŸŽ©ðŸ¥š","ðŸ‘‘ðŸ¥š"];

function notify(text){
let n=document.getElementById("notification");
n.innerText=text;n.style.top="20px";
setTimeout(()=>{n.style.top="-80px"},2500);
}

function startNewGame(){
let name=document.getElementById("usernameInput").value.trim();
if(!name){alert("Enter username!");return;}
game=JSON.parse(JSON.stringify(defaultGame));
game.username=name;
showGame();updateUI();
}

function showGame(){
document.getElementById("homeScreen").style.display="none";
document.getElementById("gameScreen").style.display="block";
}

function manualSave(){
game.lastPlayed=Date.now();
localStorage.setItem("eggySave",JSON.stringify(game));
notify("Saved!");
}

function manualLoad(){
let data=localStorage.getItem("eggySave");
if(data){game=JSON.parse(data);showGame();updateUI();notify("Loaded!");}
}

function loadGameFromStorage(){
let data=localStorage.getItem("eggySave");
if(data){
game=JSON.parse(data);
showGame();updateUI();
}else{alert("No save found!");}
}

function exportSave(){
if(!game){alert("No game loaded!");return;}
let code=btoa(JSON.stringify(game));
navigator.clipboard.writeText(code);
alert("Save code copied!");
}

function importSave(){
let code=prompt("Paste save code:");
if(!code) return;
try{
game=JSON.parse(atob(code));
localStorage.setItem("eggySave",JSON.stringify(game));
showGame();updateUI();
alert("Imported successfully!");
}catch{
alert("Invalid code!");
}
}

function deleteData(){
localStorage.removeItem("eggySave");
location.reload();
}

function updateUI(){
document.body.style.background=game.background;
document.getElementById("usernameDisplay").innerText="Player: "+game.username;
document.getElementById("points").innerText="Yolk: "+Math.floor(game.points);
document.getElementById("eggName").innerText="Egg "+forms[game.form];
clickBtn.innerText="+1 Click ("+game.clickCost+")";
autoBtn.innerText="+1 Auto/sec ("+game.autoCost+")";
critBtn.innerText="Crit Chance ("+game.critCost+")";

let now=Date.now();
clickTimes=clickTimes.filter(t=>now-t<1000);
document.getElementById("cpsDisplay").innerText="CPS: "+clickTimes.length;

renderLeaderboard();
}

document.getElementById("clickArea").addEventListener("click",function(e){
let gain=game.clickValue;
game.points+=gain;game.totalClicks++;
clickTimes.push(Date.now());

let float=document.createElement("div");
float.className="floating";float.innerText="+"+gain;
let rect=this.getBoundingClientRect();
float.style.left=(e.clientX-rect.left)+"px";
float.style.top=(e.clientY-rect.top)+"px";
document.getElementById("clickWrapper").appendChild(float);
setTimeout(()=>float.remove(),1000);

updateUI();
});

setInterval(()=>{if(game){game.points+=game.passive;updateUI();}},1000);

function buyClick(){if(game.points>=game.clickCost){game.points-=game.clickCost;game.clickValue++;game.clickCost*=1.5;}}
function buyAuto(){if(game.points>=game.autoCost){game.points-=game.autoCost;game.passive++;game.autoCost*=1.6;}}
function buyCrit(){if(game.points>=game.critCost){game.points-=game.critCost;game.critChance+=0.05;game.critCost*=1.8;}}

function prestige(){
let cost=5000*(game.prestigeLevel+1);
if(game.points>=cost){
game.points=0;game.clickValue=1;game.passive=0;
game.prestigeLevel++;notify("Prestiged!");
}
}

function submitScore(){
database.ref("leaderboard/"+game.username).set({
username:game.username,
score:game.points
});
notify("Score Submitted!");
}

function renderLeaderboard(){
database.ref("leaderboard").orderByChild("score").limitToLast(10).once("value",(snapshot)=>{
let board=document.getElementById("leaderboard");
board.innerHTML="";
let data=[];
snapshot.forEach(child=>{data.push(child.val());});
data.reverse();
data.forEach(player=>{
let div=document.createElement("div");
div.innerText=player.username+" - "+Math.floor(player.score);
board.appendChild(div);
});
});
}

</script>
</body>
</html>